<head>
<meta charset="utf-8" />
<link rel="stylesheet" href='style.css'>
</head>
<div class="center"><input type='range' min='1' max='24' id='length' list="length1" value='10' oninput="printValue(); getPassword(document.getElementById('length').value)"></input>
<datalist id='length1'>
<option value='1'>
<option value='8'>
<option value='16'>
<option value='24'>
</datalist>
&nbsp;Password length:&nbsp;<div id='value'></div>
<div><input type='checkbox' id='specialchar' onclick="getPassword(document.getElementById('length').value)">Use special symbols (!@#$% etc.)</input>
<input type='submit' value='Generate!' onclick="getPassword(document.getElementById('length').value)"></input>
<input id="password" type="text"></input>
<input type='button' id='copy' value='Copy' onclick="copy()"></input></div>
<div id='warning'></div>
</div>
<script>

function printValue() {
value.innerText = document.getElementById('length').value;
}

function copy() {
var area = document.getElementById('password');
area.focus();
area.select();
document.execCommand("copy")
area.blur();
}

function getPassword(length) {
if (document.getElementById('length').value < 8) {
warning.innerText = 'Short passwords is unsafe!'
}
else {warning.innerText = '';}
password = [];
if (document.getElementById('specialchar').checked) {
	a = 33;
	b = 126;
	for (i = 0; i < length;) {
		char = Math.floor(Math.random() * (b-a+1) + a);
		if (char == 34 || char == 39 || char == 44 || char == 46 || char == 47 || char == 58 || char == 59 || char == 60 || char == 92 || char == 96) continue;
		password.push(String.fromCharCode(char));
		i++;
	}
	var pass = password.join('');
	var isSpec = true;
	for (k = 0; k < pass.length; k++)
		if ('!#$%&()+*-<>=?@[]^{}|~'.indexOf(pass[k]) > -1) {
		isSpec = false;
		document.getElementById('password').value = pass;
		break;
		}
	if (isSpec) getPassword(document.getElementById('length').value);	
	return;
}
a = 48;
b = 122;
for (i = 0; i < length;) {
	char = Math.floor(Math.random() * (b-a+1) + a);
	if (char > 57 && char < 65) continue;
	if (char > 90 && char < 97) continue;
	password.push(String.fromCharCode(char));
	i++;
}
document.getElementById('password').value = password.join('');

}

window.onload = getPassword(document.getElementById('length').value), printValue();
</script>